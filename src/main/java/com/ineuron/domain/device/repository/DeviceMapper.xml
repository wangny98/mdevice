<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ineuron.dataaccess.db.mappers.DeviceMapper">

	<!-- Device -->
	
	<insert id="addDevice">
		insert into Devices (name,code,serialNumber,dataSource,type,description)
		values(#{name},#{code}#{serialNumber},#{dataSource},#{type},#{description})
	</insert>

	<select id="getDevices" resultType="com.ineuron.domain.device.entity.Device">
		select * from Devices
	</select>
	
	<select id="getDeviceByCode" resultType="com.ineuron.domain.device.entity.Device">
		select * from Devices where code=#{code}
	</select>
		
	<update id="updateDevice">
		update Devices set name = #{name}, code =#{code}, serialNumber =#{serialNumber}, 
		dataSource =#{dataSource}, type =#{type},description=#{description} where code = #{code}
	</update>

	<delete id="deleteDevice">
		delete from Devices where code = #{code}
	</delete>

	
	<!-- attributes -->

	<select id="getDeviceAttributes" resultType="com.ineuron.domain.device.valueobject.DeviceAttribute">
		select * from DeviceAttributes
	</select>

	<select id="getDeviceAttributesByCategoryId" resultType="com.ineuron.domain.device.valueobject.DeviceAttribute">
		select * from DeviceAttributes where deviceAttributeCategoryId=#{deviceAttributeCategoryId}
	</select>
	
	<select id="getDeviceAttributeByName" resultType="com.ineuron.domain.device.valueobject.DeviceAttribute">
		select * from DeviceAttributes where name=#{name}
	</select>

	<insert id="addDeviceAttribute">
		insert into DeviceAttributes (name,code,deviceAttributeCategoryId)
		values(#{name},#{code},#{deviceAttributeCategoryId})
	</insert>

	<update id="updateDeviceAttribute">
		update DeviceAttributes set name = #{name}, code = #{code}, 
		deviceAttributeCategoryId=#{deviceAttributeCategoryId} where id = #{id}
	</update>

	<delete id="deleteDeviceAttribute">
		delete from DeviceAttributes where name = #{name}
	</delete>
	
	<select id="getDeviceAttributeCategoryById" resultType="com.ineuron.domain.device.valueobject.DeviceAttributeCategory">
		select * from DeviceAttributeCategories where id=#{deviceAttributeCategoryId}
	</select>
	
	<select id="getDeviceAttributeCategories" resultType="com.ineuron.domain.device.valueobject.DeviceAttributeCategory">
		select * from DeviceAttributeCategories
	</select>
	
		
</mapper>